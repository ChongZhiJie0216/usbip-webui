# ğŸ”Œ USBIP Web ç®¡ç†ç•Œé¢ï¼ˆåŸºäº Flask + WebSocketï¼‰

è¿™æ˜¯ä¸€ä¸ªé€šè¿‡ç½‘é¡µå®æ—¶æŸ¥çœ‹å¹¶æ§åˆ¶ USBIP è®¾å¤‡ç»‘å®šçŠ¶æ€çš„è½»é‡çº§ç®¡ç†å·¥å…·ï¼Œé€‚ç”¨äº iStoreOS ç­‰è®¾å¤‡ã€‚  
è¯¥é¡¹ç›®éƒ¨ç½²åœ¨ Docker å®¹å™¨ä¸­ï¼Œ**usbip å®é™…æ‰§è¡Œä»åœ¨å®¿ä¸»æœºå®Œæˆ**ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- å®æ—¶æ˜¾ç¤º USB è®¾å¤‡åˆ—è¡¨ï¼ˆBUS ID / è®¾å¤‡ä¿¡æ¯ / ç»‘å®šçŠ¶æ€ï¼‰
- ä¸€é”® Bind / Unbind æ“ä½œ
- WebSocket å®æ—¶åˆ·æ–°è®¾å¤‡çŠ¶æ€
- ç®€æ´ç¾è§‚çš„ç½‘é¡µå‰ç«¯ï¼Œé€‚é…ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯

---

## ğŸ“¸ æˆªå›¾é¢„è§ˆ

![alt text](image.png)
![alt text](image-1.png)

---

## ğŸ—‚ é¡¹ç›®ç»“æ„

```
usbip_web/
â”œâ”€â”€ app.py               # Flask ä¸»åº”ç”¨
â”œâ”€â”€ usbip_utils.py       # è°ƒç”¨å®¿ä¸» usbip çš„å·¥å…·å°è£…
â”œâ”€â”€ Dockerfile           # å®¹å™¨æ„å»ºé…ç½®
â”œâ”€â”€ docker-compose.yml   # ä¸€é”®éƒ¨ç½²é…ç½®
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html       # ç½‘é¡µæ¨¡æ¿
â””â”€â”€ static/
    â”œâ”€â”€ main.js          # å‰ç«¯é€»è¾‘ (å« WebSocket)
    â””â”€â”€ style.css        # æ ·å¼ç¾åŒ–
```

---

## ğŸš€ éƒ¨ç½²æ–¹å¼ï¼ˆiStoreOS ç¯å¢ƒï¼‰

### 1ï¸âƒ£ å‡†å¤‡é¡¹ç›®

ä¸Šä¼ æ•´ä¸ª `usbip-webui` é¡¹ç›®åˆ° iStoreOS è·¯ç”±å™¨æˆ–ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å…‹éš†ï¼š

```bash
git clone https://github.com/ChongZhiJie0216/usbip-webui
cd usbip-webui
```

---

### 2ï¸âƒ£ å¯åŠ¨æœåŠ¡

ä½¿ç”¨ Docker Compose å¯åŠ¨ï¼š

```bash
docker-compose up -d
```

---

### 3ï¸âƒ£ è®¿é—®ç•Œé¢

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š

```
http://<ä½ çš„iStoreOS IP>:8080
```

å³å¯æŸ¥çœ‹å¹¶ç®¡ç† USBIP è®¾å¤‡ã€‚

---

## âš™ docker-compose.yml å†…å®¹

```yaml
version: "3.8"
services:
  usbip-web:
    container_name: usbip_web
    build: .
    ports:
      - "8080:5000"
    privileged: true
    volumes:
      - /dev/bus/usb:/dev/bus/usb
      - /sys/bus/usb:/sys/bus/usb
      - /sys/devices:/sys/devices
      - /dev:/dev
    restart: unless-stopped
```

### ğŸ“Œ æŒ‚è½½è¯´æ˜

| å®¿ä¸»è·¯å¾„       | ç”¨é€”                         |
| -------------- | ---------------------------- |
| `/dev/bus/usb` | è¯»å–è®¾å¤‡ä¿¡æ¯                 |
| `/sys/bus/usb` | è®¾å¤‡ç»‘å®šçŠ¶æ€åˆ¤æ–­             |
| `/sys/devices` | è·å–è®¾å¤‡æè¿°ã€é©±åŠ¨ä¿¡æ¯       |
| `/dev`         | æŸäº›ç³»ç»Ÿäº¤äº’éœ€è¦è®¿é—®è®¾å¤‡èŠ‚ç‚¹ |

---

## ğŸ”§ å‰æè¦æ±‚

- å®¿ä¸»æœºï¼ˆiStoreOSï¼‰å·²æ­£ç¡®å®‰è£…å¹¶é…ç½®å¥½ `usbip`
- `usbip` å‘½ä»¤éœ€å¯é€šè¿‡å®¹å™¨è®¿é—®ï¼ˆé€šè¿‡ volume æ˜ å°„å®ç°ï¼‰
- å®¿ä¸» USB è®¾å¤‡éœ€æ”¯æŒ USBIPï¼Œå¹¶æ­£ç¡®ç»‘å®š/è§£ç»‘é©±åŠ¨

---

## âœ… ç¤ºä¾‹æ“ä½œ

æŸ¥çœ‹è®¾å¤‡ï¼š

```bash
usbip list -l
```

æ‰‹åŠ¨ç»‘å®šï¼ˆåœ¨å®¿ä¸»ï¼‰ï¼š

```bash
usbip bind -b 1-1
```

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

- æœ¬é¡¹ç›®å®¹å™¨**ä¸æä¾› USB è®¾å¤‡å…±äº«æœåŠ¡**ï¼ˆusbipdï¼‰ï¼Œä»…æä¾›ç®¡ç†å‰ç«¯
- æ‰€æœ‰å®é™…æ“ä½œä¾èµ–å®¿ä¸»æœºçš„ usbip å·¥å…·
- Web å‰ç«¯é»˜è®¤ç›‘å¬ 8080 ç«¯å£ï¼Œå¯æ ¹æ®éœ€è¦ä¿®æ”¹

---

## ğŸ“ æ¥æº

### [USB over IP tunnel](https://openwrt.org/docs/guide-user/services/usb.iptunnel)
